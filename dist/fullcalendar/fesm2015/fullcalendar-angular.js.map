{"version":3,"file":"fullcalendar-angular.js","sources":["../../projects/fullcalendar/src/lib/utils.ts","../../projects/fullcalendar/src/lib/fullcalendar-options.ts","../../projects/fullcalendar/src/lib/fullcalendar.component.ts","../../projects/fullcalendar/src/lib/fullcalendar.module.ts","../../../projects/fullcalendar/src/public_api.ts","../../../projects/fullcalendar/src/fullcalendar-angular.ts"],"sourcesContent":["\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\n/*\r\nReally simple clone utility. Only copies plain arrays, objects, and Dates. Transfers everything else as-is.\r\nWanted to use a third-party lib, but none did exactly this.\r\n*/\r\nexport function deepCopy(input) {\r\n\r\n  if (Array.isArray(input)) {\r\n    return input.map(deepCopy);\r\n\r\n  } else if (input instanceof Date) {\r\n    return new Date(input.valueOf());\r\n\r\n  } else if (typeof input === 'object' && input) { // non-null object\r\n    return mapHash(input, deepCopy);\r\n\r\n  } else { // everything else (null, function, etc)\r\n    return input;\r\n  }\r\n}\r\n\r\n\r\nexport function shallowCopy(val) {\r\n  if (typeof val === 'object') {\r\n    if (Array.isArray(val)) {\r\n      val = Array.prototype.slice.call(val);\r\n    } else if (val) { // non-null\r\n      val = { ...val };\r\n    }\r\n  }\r\n  return val;\r\n}\r\n\r\n\r\nexport function mapHash(input, func) {\r\n  const output = {};\r\n\r\n  for (const key in input) {\r\n    if (hasOwnProperty.call(input, key)) {\r\n      output[key] = func(input[key], key);\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n","\r\nexport const OPTION_IS_DEEP = {\r\n  headerToolbar: true,\r\n  footerToolbar: true,\r\n  events: true,\r\n  eventSources: true,\r\n  resources: true\r\n};\r\n","import deepEqual from 'fast-deep-equal';\r\nimport {\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  AfterViewInit,\r\n  DoCheck,\r\n  AfterContentChecked,\r\n  OnDestroy,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { Calendar, CalendarOptions } from '@fullcalendar/core';\r\nimport { deepCopy, shallowCopy, mapHash } from './utils';\r\nimport { OPTION_IS_DEEP } from './fullcalendar-options';\r\n\r\n@Component({\r\n  selector: 'full-calendar',\r\n  template: '',\r\n  styleUrls: ['./fullcalendar.component.scss'],\r\n  encapsulation: ViewEncapsulation.None // the styles are root-level, not scoped within the component\r\n})\r\nexport class FullCalendarComponent implements AfterViewInit, DoCheck, AfterContentChecked, OnDestroy {\r\n\r\n  @Input() options?: CalendarOptions;\r\n  @Input() deepChangeDetection?: boolean;\r\n\r\n  private calendar: Calendar;\r\n  private optionSnapshot: object = {}; // for diffing only\r\n\r\n  constructor(private element: ElementRef) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const { deepChangeDetection } = this;\r\n    const options = this.options || {};\r\n\r\n    // initialize snapshot\r\n    this.optionSnapshot = mapHash(options, (optionVal, optionName) => (\r\n      (deepChangeDetection && OPTION_IS_DEEP[optionName])\r\n        ? deepCopy(optionVal)\r\n        : optionVal\r\n    ));\r\n\r\n    this.calendar = new Calendar(this.element.nativeElement, options);\r\n    this.calendar.render();\r\n  }\r\n\r\n  /*\r\n  allows us to manually detect complex input changes, internal mutations to certain options.\r\n  called before ngOnChanges. called much more often than ngOnChanges.\r\n  */\r\n  ngDoCheck() {\r\n    if (this.calendar) { // not the initial render\r\n      const { deepChangeDetection, optionSnapshot } = this;\r\n      const newOptions = this.options || {};\r\n      const newProcessedOptions = {};\r\n      let anyChanges = false;\r\n\r\n      // detect adds and updates (and update snapshot)\r\n      for (const optionName in newOptions) {\r\n        if (newOptions.hasOwnProperty(optionName)) {\r\n          let optionVal = newOptions[optionName];\r\n\r\n          if (deepChangeDetection && OPTION_IS_DEEP[optionName]) {\r\n            if (!deepEqual(optionSnapshot[optionName], optionVal)) {\r\n              optionSnapshot[optionName] = deepCopy(optionVal);\r\n              anyChanges = true;\r\n\r\n              // trick FC into knowing about a nested change.\r\n              // TODO: future versions won't need this.\r\n              // can't use the previously-made deep copy because it blows away prototype-association.\r\n              optionVal = shallowCopy(optionVal);\r\n            }\r\n\r\n          } else {\r\n            if (optionSnapshot[optionName] !== optionVal) {\r\n              optionSnapshot[optionName] = optionVal;\r\n              anyChanges = true;\r\n            }\r\n          }\r\n\r\n          newProcessedOptions[optionName] = optionVal;\r\n        }\r\n      }\r\n\r\n      const oldOptionNames = Object.keys(optionSnapshot);\r\n\r\n      // detect removals (and update snapshot)\r\n      for (const optionName of oldOptionNames) {\r\n        if (!(optionName in newOptions)) { // doesn't exist in new options?\r\n          delete optionSnapshot[optionName];\r\n          anyChanges = true;\r\n        }\r\n      }\r\n\r\n      if (anyChanges) {\r\n        this.calendar.pauseRendering();\r\n        this.calendar.resetOptions(newProcessedOptions);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterContentChecked() {\r\n    if (this.calendar) { // too defensive?\r\n      this.calendar.resumeRendering();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.calendar) { // too defensive?\r\n      this.calendar.destroy();\r\n      this.calendar = null;\r\n    }\r\n  }\r\n\r\n  public getApi(): Calendar {\r\n    return this.calendar;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { globalPlugins, PluginDef } from '@fullcalendar/core';\r\nimport { FullCalendarComponent } from './fullcalendar.component';\r\n\r\n@NgModule({\r\n  declarations: [FullCalendarComponent],\r\n  imports: [],\r\n  exports: [FullCalendarComponent]\r\n})\r\nexport class FullCalendarModule {\r\n\r\n  static registerPlugins(plugins: PluginDef[]) {\r\n    globalPlugins.push(...plugins);\r\n  }\r\n\r\n}\r\n","/*\r\n * Public API Surface of fullcalendar\r\n */\r\n\r\nexport * from './lib/fullcalendar.component';\r\nexport * from './lib/fullcalendar.module';\r\n\r\n// make available all of FC's utils/types\r\nexport * from '@fullcalendar/core';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}